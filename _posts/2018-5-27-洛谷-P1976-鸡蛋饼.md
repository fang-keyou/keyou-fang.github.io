---
layout:     post
title:      "洛谷 P1976 鸡蛋饼"
subtitle:   "洛谷的P1976，标准的卡特兰数欧！"
date:       2018-05-14 12:00:00
author:     "Fan"
header-img: "img/post-bg-universe.jpg"
header-mask: 0.3
catalog:    true
tags:
    - C++
    - 题解
---

>Luogu p1976 典型的数论题！

#### 可忧君的题解~

这题**~~`或许`~~**是卡特兰数吧

那么 卡特兰数 是什么尼？

**卡特兰数** 又称 卡塔兰数 ， 卡特兰数 是 组合数学 中一个常出现在各种 计数问题 中的数列。以比利时的数学家 `欧仁·查理·卡塔兰` 的名字来命名。

卡特兰数$$C_{n+1}$$满足以下递推关系：

$$C_{n+1} = C_1*C_n + C_2*C_{n-1} + C_3*C_{n-2} + …… + C_{n-1}*C_2 + C_n*C_1$$

而 卡特兰数 前几项为：
1, 1, 2, 5, 14, 42, 132, 429, 1430, 4862, 16796, 58786, 208012, 742900, 2674440, 9694845, 35357670, 129644790, 477638700, 1767263190, 6564120420, 24466267020, 91482563640, 343059613650, 1289904147324 ……

> [还不懂的点我](https://baike.baidu.com/item/%E5%8D%A1%E7%89%B9%E5%85%B0%E6%95%B0/6125746?fr=aladdin)



---

理由如下：

那这道题为毛是 卡特兰数 尼？

那么假如我们在圆上画了2n个点，顺时针编号为1,2,3,4……，你便会发现，如果一个奇数点和另一个奇数点相连，一定会造成将剩下所没有连线的点分在两边的都是奇数个，而后两边必定有一个点没线连或穿越其中的一条线，那么就不可能完成了。那么我们可以把奇数点看成左括号，偶数点看成右括号，然后把圆切开，就变成了一个括号匹配的方案数问题。为什么圆可以切开呢？因为A连B和B连A是同一种切法。

在这里可以用h(n)=C(2n,n)/(n+1),用扩展欧几里德求逆元。

---

贴代码：

```cpp
#include <bits/stdc++.h> //万能头文件
using namespace std;

#define new_while(i, a, b) for(register int i = a; i <= b; ++i)  //register：这个关键字请求编译器尽可能的将变量存在CPU内部寄存器中，而不是通过内存寻址访问，以提高效率，注意是尽可能，不是绝对
#define ll long long int
#define mod 100000007   //题目中的mod

ll eeie(ll a, ll c);

ll list_a[1000010] = {1, 1}, n;

int main()
{
    cin>>n;
    new_while(i, 2, n<<1)
        list_a[i] = (list_a[i - 1] * i) % mod;
    printf("%lld\n", (((list_a[n<<1]/*比如原来n是8,它的二进制数为01000,进行>>1右移一位后就是00100,4了~*/%mod)*eeie(list_a[n+1],mod-2))%mod*eeie(list_a[n],mod-2))%mod);
    return 0;
}

ll eeie(ll a, ll c)
{
    long long b = 1;
    while (c > 0)
    {
          if(c & 1)   //if (A & B) 如果 A 为 false ，整个表达式就为 false，但还要计算 B 的值。
            b = (b * a) % mod;
          c >>= 1;   //详见第 26 行注释
          a = (a * a) % mod;
    }
    return b;
}

```

`这是我的第一个题解，多见谅！`

## 评论：

<a id="comments"></a><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/gh/xcss/valine@v1.1.7/dist/Valine.min.js?v=undefined"></script><script>var valine = new Valine({
  el:'#vcomments',
  notify:false || false, 
  verify:false|| false, 
  app_id:'Rsr2vb6m50xfHQFuHCjnY1aa-gzGzoHsz',
  app_key:'BBOJ6wlnRnBUd4qK0C4GpByW',
  placeholder:'想唛唛？上面不用填，但如果你要提问的话，把邮箱写上......',
  path: window.location.pathname,
  avatar:'identicon'
})</script></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script>

